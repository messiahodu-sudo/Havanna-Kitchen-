<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Havanna's KITCHEN | Ikom's Finest</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .hidden { display: none !important; }
    </style>

    <script>
 
        let selectedFood = "";

       
        const SUPABASE_URL = 'https://cyrrbmqirlkgwmwfmaqi.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN5cnJibXFpcmxrZ3dtd2ZtYXFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0NDE1NzgsImV4cCI6MjA4NTAxNzU3OH0.FXLDZCRQzFydVUFKGvcDbi7ux-B1TChnFZzJ2T6CGB8';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

       
        function openModal(foodName) {
            selectedFood = foodName;
            const modal = document.getElementById('orderModal');
            if (modal) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            }
        }

        function closeModal() {
            const modal = document.getElementById('orderModal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }
    </script>
</head>

<body class="bg-gray-50 text-gray-900">

    <nav class="sticky top-0 z-40 glass border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="text-xl font-extrabold text-orange-600 uppercase tracking-tighter">Havanna's Kitchen</div>
            <a href="Index.html" class="flex items-center text-sm font-bold text-gray-600 hover:text-orange-600 transition">
                <i class="fas fa-arrow-left mr-2"></i> BACK TO HOME
            </a>
        </div>
    </nav>

    <section class="relative h-[40vh] flex items-center justify-center text-center text-white px-6">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&w=1200" class="w-full h-full object-cover" alt="Restaurant Ambiance">
            <div class="absolute inset-0 bg-black/50"></div>
        </div>
        <div class="relative z-10 max-w-3xl">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-2">Our Full Menu</h1>
            <p class="text-lg opacity-90">Selected flavors from Ikom delivered to your door.</p>
        </div>
    </section>

    <section class="py-20 px-6 max-w-7xl mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="bg-white rounded-3xl overflow-hidden shadow-sm border border-gray-100 p-4">
                <img src="https://images.unsplash.com/photo-1608198093002-ad4e005484ec?auto=format&fit=crop&w=600" class="w-full h-56 object-cover rounded-2xl mb-4">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="text-xl font-bold">Coconut Bread</h3>
                    <span class="text-orange-600 font-bold">₦2,500</span>
                </div>
                <p class="text-gray-500 text-sm mb-6">Soft, rich, and naturally sweet.</p>
                <button onclick="openModal('Coconut Bread')" class="w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition">Order Now</button>
            </div>

            <div class="bg-white rounded-3xl overflow-hidden shadow-sm border border-gray-100 p-4">
                <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?auto=format&fit=crop&w=600" class="w-full h-56 object-cover rounded-2xl mb-4">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="text-xl font-bold">Classic Pizza</h3>
                    <span class="text-orange-600 font-bold">₦6,000</span>
                </div>
                <p class="text-gray-500 text-sm mb-6">Fresh dough topped with premium cheese.</p>
                <button onclick="openModal('Classic Pizza')" class="w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition">Order Now</button>
            </div>

            <div class="bg-white rounded-3xl overflow-hidden shadow-sm border border-gray-100 p-4">
                <img src="https://images.unsplash.com/photo-1628144669811-13c51817e997?auto=format&fit=crop&w=600" class="w-full h-56 object-cover rounded-2xl mb-4">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="text-xl font-bold">Jollof Rice Special</h3>
                    <span class="text-orange-600 font-bold">₦3,500</span>
                </div>
                <p class="text-gray-500 text-sm mb-6">Smoky "party" style jollof.</p>
                <button onclick="openModal('Jollof Rice Special')" class="w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition">Order Now</button>
            </div>
        </div>
    </section>

    <div id="orderModal" class="fixed inset-0 bg-black/60 hidden items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-6 max-w-sm w-full shadow-2xl">
            <h2 class="text-xl font-bold mb-4">Order Details</h2>
            <form id="orderForm" class="space-y-4">
                <input type="text" id="custName" placeholder="Your Name" required class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none">
                <input type="text" id="custPhone" placeholder="Phone Number" required class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none">
                <input type="text" id="custAddress" placeholder="Delivery Address" required class="w-full border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none">
                
                <div class="flex space-x-2 pt-2">
                    <button type="button" onclick="closeModal()" class="w-1/2 bg-gray-100 text-gray-600 p-3 rounded-xl font-bold hover:bg-gray-200 transition">Cancel</button>
                    <button type="submit" id="submitBtn" class="w-1/2 bg-green-600 text-white p-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg">Confirm</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('orderForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.innerText = "Processing...";
            btn.disabled = true;

            const { error } = await supabaseClient
                .from('Orders') // Matches Capital 'O' in database
                .insert([{
                    customer_name: document.getElementById('custName').value,
                    phone_number: document.getElementById('custPhone').value,
                    delivery_address: document.getElementById('custAddress').value,
                    food_item: selectedFood,
                    status: 'Pending'
                }]);

            if (error) {
                alert("❌ Order Failed!");
                alert("REASON: " + error.message);
                btn.innerText = "Confirm";
                btn.disabled = false;
            } else {
                alert("✅ Success! Your order for " + selectedFood + " has been sent.");
                closeModal();
                location.reload(); 
            }
        });
    </script>
</body>
</html>
